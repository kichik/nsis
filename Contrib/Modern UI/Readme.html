<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>

<title>NSIS Modern User Interface</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">

body
	{
	padding: 10px;
	background-color: #F0F0F0;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 10pt;
	font-weight: normal;
	}

center
	{
	text-align: center;
	}

table
	{
	margin: auto;
	text-align: left;
	background-color: #FFFFFF;
	}

.maintable
	{
    border: 2px solid #376EAB;
	}

.margin
	{
	margin: 20px;
	}

.text
	{
	margin: 20px;
	}

.bold
	{
	font-weight: bold;
	color: #303030;
	}

.changelog
	{
	}

.header
	{
	font-size: 14pt;
	color: #7A7272;
	}
	
.subheader
	{
	margin: 20px;
	font-size: 11pt;
	font-weight: bold;
	color: #303030;
	}

.footer
	{
    margin: 5px 5px 5px 5px;
    text-align: right;
    font-size: 8pt;
	color: #909090;
	}
	
a:link, a:visited, a:active
	{
	color: #294F75;
	text-decoration: none;
	}
	
a:hover
	{
	color: #182634;
	text-decoration: none;
	}
	
</style>

</head>

<body>

<div class="center">
<table width="750" cellpadding="0" cellspacing="0" class="maintable">
<tr><td>
<table border="0" cellpadding="0" cellspacing="0">
<tr class="header">
  <td><img src="Readme.jpg" width="750" height="80" alt=""></td>
</tr>

<tr>
 <td><div class="margin">
<p class="header">Introduction</p>
<p class="text">NSIS 2 makes it is possible to create installers
with a custom user interface.</p>
<p class="text"> I made this interface with a modern wizard style, 
  like the wizards of recent Windows versions. This new interface 
  also features new graphics and a description area on the
  component-selection page.</p>
<p class="text">To use this new interface for for installer, you need 
  to add some code to your NSIS script. Read this document for more info!</p>
<p class="header">Requirements</p>
<p class="text"><a href="http://nsis.sourceforge.net">NSIS 2 beta 0 (or later)</a></p>
<p class="header">Screenshots</p>
<p class="text"><img src="Screenshot.png" width="503" height="393" alt=""></p>
<p class="text"><img src="Screenshot2.png" width="503" height="393" alt=""></p>
<p class="header">How to use</p>
<p class="text">The Modern UI has a macro system, so most of the code
  has already been written for you!</p>
<p class="text">The easiest way to use the Modern UI is to customize one of the <a href="#examples">example</a>
  scripts, but you can also modify an existing script.</p>
<p class="text"><span class="bold">Note:</span> If you want to add a double quote (&quot;) to a Modern UI string,
you should always escape it ($\&quot;), because the Modern UI macro's use &quot; to separate parameters.</p>
<p class="text">How to use the Modern UI in an existing script:</p>
  <p class="subheader">1. Include the header file</p>
  <pre class="margin">!include "${NSISDIR}\Contrib\Modern UI\System.nsh"</pre>
  <p class="subheader">2. Define the name and version of your software</p>
<pre class="margin">
!define MUI_PRODUCT "Test Software" ;Define your own software name here
!define MUI_VERSION "1.0" ;Define your own software version here
</pre>
  <p class="subheader">3. Define which elements you are using</p>
  <p class="text">The Modern UI should know which things it should insert. Use the following defines:</p>
<pre class="margin">
!define MUI_WELCOMEPAGE ;Welcome page
!define MUI_LICENSEPAGE ;License page
!define MUI_COMPONENTSPAGE ;Component-selection page
!define MUI_DIRECTORYPAGE ;Directory-selection page
!define MUI_STARTMENUPAGE ;Start Menu Folder selection page
!define MUI_FINISHPAGE ;Finish page with options to run the program or reboot
  !define MUI_FINISHPAGE_RUN "$INSTDIR\File.exe" ;Option to run a file
  !define MUI_FINISHPAGE_SHOWREADME "$INSTDIR\Readme.txt" ;Option to show a Readme
  !define MUI_FINISHPAGE_NOREBOOTSUPPORT ;Disables support for a reboot option.
                                         ;Use this if you are not using /REBOOTOK
                                         ;or SetRebootFlag.

!define MUI_ABORTWARNING ;Abort warning messagebox
!define MUI_CUSTOMPAGECOMMANDS ;Use customized pages
!define MUI_CUSTOMGUIINIT ;Use customized .onGUIInit function

!define MUI_UNINSTALLER ;Uninstaller
!define MUI_UNCUSTOMPAGECOMMANDS ;Use customized uninstaller pages
!define MUI_UNCUSTOMGUIINIT ;Use customized un.onGUIInit function
</pre>
  <p class="text">You can also use a LangString for the Readme and Run filenames,
  if you have different files for different languages:</p>
<pre class="margin">
LangString FILE_README ${LANG_ENGLISH} "$INSTDIR\Readme-English.txt"

!define MUI_FINISHPAGE_SHOWREADME "$(FILE_README)"
</pre>
  <p class="subheader">4. Insert language files</p>
  <p class="text">Insert the Modern UI language files for the languages you are using:</p>
  <pre class="margin">!insertmacro MUI_LANGUAGE "English"</pre>
  <p class="text">The Modern UI language files load the NLF language files,
  so you should not use LoadLanguageFile.</p>
  <p class="text">You don't need to edit the language files if you want to customize
  some strings. Use defines before you insert the language file:</p>
  <pre class="margin">
!define MUI_INNERTEXT_LICENSE_TOP "Text on the top of the license dialog"
!insertmacro MUI_LANGUAGE "English"
</pre>
  <p class="text">Have a look at the language files for a complete list of all the
  names.
  <p class="text"><span class="bold">NOTE:</span> Not all language files contain strings for the
  new Start Menu Folder selection, Welcome and Finish pages yet. If you are using one of these
  pages and the language file does not contain these strings, you should always define them.<br>
  Please help to translate the new strings and  post them at the
  <a href="http://forums.winamp.com/forumdisplay.php?forumid=65">NSIS Forum</a>.</p>
  <p class="subheader">5. Define interface settings (optional)</p>
  <p class="text">You can change the settings of the interface by usings defines:</p>
  <pre class="margin">!define MUI_UI "${NSISDIR}\Contrib\UIs\modern2.exe"</pre>
  <p class="text">If you don't define a setting, the default will be used.</p>
  <p class="text">The following settings are available: <i>(default values)</i></p>
  <p class="text"><span class="bold">MUI_UI</span> <i>(${NSISDIR}\Contrib\UIs\modern.exe)</i><br>
  The interface file with the dialog resources</p>
  <p class="text"><span class="bold">MUI_ICON</span> <i>(${NSISDIR}\Contrib\Icons\modern-install.ico)</i><br>
  The icon of the instaleller</p>
  <p class="text"><span class="bold">MUI_UNICON</span> <i>(${NSISDIR}\Contrib\Icons\modern-uninstall.ico)</i><br>
  The icon of the uninstaleller</p>
  <p class="text"><span class="bold">MUI_CHECKBITMAP</span> <i>(${NSISDIR}\Contrib\Icons\modern.bmp)</i><br>
  The bitmap with images for the checks of the component select treeview</p>
  <p class="text"><span class="bold">MUI_BRANDINGTEXT</span> <i>(Nullsoft Install System ?.??)</i><br>
  The text at the bottom left corner of the window</p>
  <p class="text"><span class="bold">MUI_FONT, MUI_FONTSIZE</span> <i>(MS Shell Dlg, 8)</i><br>
  The font for the normal texts.</p>
  <p class="text"><span class="bold">MUI_FONT_HEADER, MUI_FONTSIZE_HEADER, MUI_FONTSTYLE_HEADER</span>
  <i>(MS Sans Serif, 8, 700)</i><br>
  The font for the title in the header. Fontstyle: [weight] [/ITALIC] [/UNDERLINE] [/STRIKE]</p>
  <p class="text"><span class="bold">MUI_FONT_TITLE, MUI_FONTSIZE_TITLE, MUI_FONTSTYLE_TITLE</span>
  <i>(Verdana, 12, 700)</i><br>
  The font for the title on the Welcome and Finish pages. Fontstyle: [weight] [/ITALIC] [/UNDERLINE] [/STRIKE]</p>
  <p class="text"><span class="bold">MUI_INSTALLCOLORS</span> <i>(/windows)</i><br>
  The hexadecimal colors of the details screen (&quot;foreground&quot; &quot;background&quot;)
  <p class="text"><span class="bold">MUI_PROGRESSBAR</span> <i>(smooth)</i><br>
  The style of the progress bar (&quot;colored&quot; to use the MUI_INSTALLCOLORS or &quot;&quot; for a old-school windows look)</p>
  <p class="text"><span class="bold">MUI_SPECIALINI</span> <i>(${NSISDIR}\Contrib\ioSpecial.ini)</i><br>
  Install Options INI File for the Welcome and Finish pages</p>
  <p class="text"><span class="bold">MUI_SPECIALBITMAP</span> <i>(${NSISDIR}\Contrib\Icons\modern-wizard.bmp)</i><br>
  Bitmap for the Welcome and Finish pages</p>
  <p class="subheader">6. Insert the MUI_SYSTEM macro</p>
  <pre class="margin">!insertmacro MUI_SYSTEM</pre>
  <p class="subheader">7. Insert the MUI_SECTIONS_FINISHHEADER macro
  <p class="text">If you are not using a Finish page, you should insert the
  MUI_SECTIONS_FINISHHEADER after all the sections to display the finish-header.</p>
<pre class="margin">!insertmacro MUI_SECTIONS_FINISHHEADER</pre>
<p class="text">In the uninstaller, insert MUI_UNFINISHHEADER at the end of the
Unintaller section.</p>
<pre class="margin">
!insertmacro MUI_UNFINISHHEADER
</pre>
  <p class="subheader">8. Set the descriptions for the sections</p>
  <p class="text">Insert the description macro's to set the descriptions
  for the sections. These descriptions will be displayed when the user
  hovers the mouse over a component in the component-selection page:</p>
<pre class="margin">
LangString DESC_SectionName1 ${LANG_ENGLISH} "Description of section 1."
LangString DESC_SectionName2 ${LANG_ENGLISH} "Description of section 2."

!insertmacro MUI_FUNCTIONS_DESCRIPTION_BEGIN
  !insertmacro MUI_DESCRIPTION_TEXT ${SectionName1} $(DESC_SectionName1)
  !insertmacro MUI_DESCRIPTION_TEXT ${SectionName2} $(DESC_SectionName2)
!insertmacro MUI_FUNCTIONS_DESCRIPTION_END
</pre>
<p class="text">Always set a name for a section:</p>
<pre class="margin">
Section "Section Name 1" SectionName1
 ...
SectionEnd

Section "Section Name 2" SectionName2
 ...
SectionEnd
</pre>
<p class="header">Custom pages</p>
<p class="text">
<p class="subheader">Custom page commands</p>
<p class="text">If you want add custom pages to your installer, you should insert your
own page commands to set the order of the pages and the names of the page functions.</p>
<pre class="margin">
LangString TEXT_IO_WINDOWTITLE ": Install Options Page Title"

!insertmacro MUI_PAGECOMMAND_WELCOME
!insertmacro MUI_PAGECOMMAND_LICENSE
!insertmacro MUI_PAGECOMMAND_COMPONENTS
!insertmacro MUI_PAGECOMMAND_DIRECTORY
Page custom FunctionName $(TEXT_IO_WINDOWTITLE) ;A custom page
!insertmacro MUI_PAGECOMMAND_INSTFILES
!insertmacro MUI_PAGECOMMAND_FINISH
</pre>
<p class="text">This is also possible in the uninstaller:</p>
<pre class="margin">
LangString un.UNTEXT_IO_WINDOWTITLE ": Install Options Page Title"

!insertmacro MUI_UNPAGECOMMAND_CONFIRM
UninstPage custom un.FunctionName $(UNTEXT_IO_WINDOWTITLE) ;A custom page
!insertmacro MUI_UNPAGECOMMAND_INSTFILES
</pre>
<p class="text">Don't forget to define MUI_CUSTOMPAGECOMMANDS or
MUI_UNCUSTOMPAGECOMMANDS before inserting the MUI_SYSTEM macro.</p>
<p class="subheader">Call Install Options</p>
<p class="text">First, you need to extract your InstallOptions INI
File in the .onInit function (un.onInit for the uninstaller):</p>
<pre class="margin">
Function .onInit
  !insertmacro MUI_INSTALLOPTIONS_EXTRACT "ioFile.ini"
FunctionEnd

Function FunctionName
  !insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE)"
  !insertmacro MUI_INSTALLOPTIONS_SHOW "ioFile.ini"
FunctionEnd
</pre>
<p class="text">Have a look at the <a href="..\InstallOptions\Install Options.html">
Install Options documentation</a> for info about creating Install Options INI Files.</p>
<p class="text">You can call Install Options in the function defined with the Page
or UninstPage command:</p>
<pre class="margin">
LangString TEXT_IO_TITLE ${LANG_ENGLISH} "Install Options Page Title"
LangString TEXT_IO_SUBTITLE ${LANG_ENGLISH} "A subtitle"

Function FunctionName
  !insertmacro MUI_HEADER_TEXT "$(TEXT_IO_TITLE)" "$(TEXT_IO_SUBTITLE)"
  !insertmacro MUI_INSTALLOPTIONS_SHOW "ioFile.ini"
FunctionEnd
</pre>
<p class="header"><a name="examples">Examples</a></p>
<p class="text">Basic: <a href="../../Examples/Modern UI/Basic.nsi">Basic.nsi</a><br>
  Multilanguage: <a href="../../Examples/Modern UI/MultiLanguage.nsi">MultiLanguage.nsi</a><br>
  Custom pages: <a href="../../Examples/Modern UI/InstallOptions.nsi">InstallOptions.nsi</a><br>
  Start Menu Folder selection: <a href="../../Examples/Modern UI/StartMenu.nsi">StartMenu.nsi</a><br>
  Welcome/Finish page: <a href="../../Examples/Modern UI/WelcomeFinish.nsi">WelcomeFinish.nsi</a><br>
  </p>
<p class="header">The interface</p>
<p class="subheader">Modern.exe and modern2.exe</p>
  <p class="text">There are two different versions of the interface
  available. Modern.exe contains the dialogs of the standard interface.
  If you have an installer with a lot of subsections 
  or long section names, use modern2.exe, which has a different
  component-selection page.</p>
<p class="subheader">Customize the dialogs</p>
  <p class="text">To change elements on the dialogs, modify modern.exe or
  modern2.exe in the Contrib\UIs directory using a resource editor such as
  <a href="http://www.users.on.net/johnson/resourcehacker/">Resource Hacker</a>.</p>
  <p class="text">The 'Loading Setup' text on the splash screen which 
  is being displayed when the installer is starting (Verifying 
  installer, Unpacking data) cannot be changed by the script,
  because the installer is not started yet when this dialog is being
  displayed. If you want to change  this text, modify dialog 111 of
  modern(2).exe.<br>
  The 'Verifying installer' and 'Unpacking data' texts are defined in
  the language header file of the NSIS exehead (Source\exehead\lang.h). 
  To change them, you need to edit this file and recompile NSIS.</p>
  <p class="text">To modify the Welcome and Finish dialog, edit the Install
  Options INI File ioWizard.ini in the 'Contrib\Modern UI' directory.
<p class="subheader">Customize the GUIInit function</p>
<p class="text">If you want to insert your own code in the .onGUIInit function,
define MUI_CUSTOMGUIINIT (MUI_UNCUSTOMGUIINIT for the uninstaller) before inserting
MUI_SYSTEM and insert the MUI_GUIINIT (MUI_UNGUIINIT for the uninstaller) macro
in your .onGUIInit or un.onGUInit function.</p>
<pre class="text">
!define MUI_CUSTOMGUIINIT

Function .onGUIInit
  !insertmacro MUI_GUIINIT
  ...your own code...
FunctionEnd
</pre>
<p class="header">Version history</p>
<ul>
<li class="changelog">1.6 - November 18, 2002
  <ul>
    <li>Welcome / Finish pages
    <li>Automatic ask for reboot on finish page
    <li>Create no shortcut option on Start Menu Folder selection page
    <li>Customizing GUIInit functions easier
    <li>Minor font / UI changes
  </ul>
<p class="text"></p>
<li class="changelog">1.5 - November 11, 2002
  <ul>
    <li>New language file format
    <li>Language strings can be changed in the script without editing
    language files
    <li>Start Menu Folder selection page
    <li>'Click Next to continue' and 'Click Install to start the installation'
    texts automatically change to the page order
    <li>Install Options macro's updated. MUI_INSTALLOPTIONS_DISPLAY is
    the standard macro now. Use MUI_INSTALLOPTIONS_INITDIALOG and
    MUI_INSTALLOPTIONS_SHOW if you want to customize dialog controls.
    <li>No more writing window titles & abort warnings to Install Options
    INI Files
    <li>Compatible with updated paging system
    <li>Renamed macro's and defines
    <li>Some small fixes
  </ul>
</ul>  
<p class="text"><a href="Changelog.txt">Complete version history</a></p>
<p class="header">Credits</p>
<p class="text">Made by Joost Verburg.<br>
  Icons designed by Nikos Adamamas, aka adni18.<br>
  Thanks to Amir Szekely, aka KiCHiK, for his work on NSIS 
  to make this possible.</p>
<p class="header">Help</p>
<p class="text">Please post questions at the <a href="http://forums.winamp.com/forumdisplay.php?forumid=65">NSIS 
  Forum</a>.</p>
<p class="header">License</p>
<pre class="margin">Copyright &copy; 2002 Joost Verburg

This software is provided 'as-is', without any express or implied
warranty. In no event will the authors be held liable for any damages
arising from the use of this software.

Permission is granted to anyone to use this software for any purpose,
including commercial applications, and to alter it and redistribute
it freely, subject to the following restrictions:

1. The origin of this software must not be misrepresented; 
   you must not claim that you wrote the original software.
   If you use this software in a product, an acknowledgment in the
   product documentation would be appreciated but is not required.
2. Altered versions must be plainly marked as such,
   and must not be misrepresented as being the original software.
3. This notice may not be removed or altered from any distribution.
</pre>
  </div></td>
  </tr>
  <tr>
    <td><div class="footer">&copy;2002 Joost Verburg</div></td>
  </tr>
</table>
</td></tr>
</table>
</div>

</body>
</html>